<!DOCTYPE html>
<html>
<head>
    <title>JellyExplorer Configuration</title>
</head>
<body>
    <div id="JellyExplorerConfigPage" data-role="page" class="page type-interior pluginConfigurationPage">
        <div data-role="content">
            <div class="content-primary">
                <form id="JellyExplorerConfigForm">
                    <label for="tmdbApiKey">TMDB API Key:</label>
                    <input id="tmdbApiKey" name="TmdbApiKey" type="text" required />
                    <button type="submit">Save</button>
                </form>
            </div>
        </div>
        <script type="text/javascript">
            var JellyExplorerConfig = {
                pluginUniqueId: "53b691fd-9675-fb3e-c72a-7855259d1ddc"
            };

            $('#JellyExplorerConfigPage').on('pageshow', function () {
                Dashboard.showLoadingMsg();
                ApiClient.getPluginConfiguration(JellyExplorerConfig.pluginUniqueId).then(function (config) {
                    $('#tmdbApiKey').val(config.TmdbApiKey);
                    Dashboard.hideLoadingMsg();
                });
            });

            $('#JellyExplorerConfigForm').on('submit', function (e) {
                e.preventDefault();
                Dashboard.showLoadingMsg();
                ApiClient.getPluginConfiguration(JellyExplorerConfig.pluginUniqueId).then(function (config) {
                    config.TmdbApiKey = $('#tmdbApiKey').val();
                    ApiClient.updatePluginConfiguration(JellyExplorerConfig.pluginUniqueId, config).then(function (result) {
                        Dashboard.processPluginConfigurationUpdateResult(result);
                    });
                });
            });
        </script>
    </div>
</body>
</html>